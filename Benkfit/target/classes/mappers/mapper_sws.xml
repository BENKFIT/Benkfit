<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="spring.mvc.benkfit.persistence.DAO_sws">
	
	<!-- 이벤트 목록 갯수 -->
	<select id="getEventCnt" resultType="int">
		SELECT COUNT(*) FROM event_tbl
	</select>
	
	<!-- 이벤트 목록 -->
	<select id="getEventList" resultType="spring.mvc.benkfit.vo.EventVo" parameterType="java.util.Map">
		<![CDATA[
		 	SELECT * 
			FROM (SELECT eve_num, eve_title, eve_content, eve_start, eve_end, eve_regDate, eve_img, rownum rNum
				  FROM (
						SELECT * FROM event_tbl
						ORDER BY eve_num DESC
					   )
				 )
			WHERE rNum >= #{start} AND rNum <= #{end}
		 ]]> 
	</select>
	
	<!-- 이벤트 상세 페이지 -->
	<select id="getEvent" resultType="spring.mvc.benkfit.vo.EventVo" >
		select * from event_tbl where eve_num=#{eve_num}
	</select>
	
	<!-- 이벤트 등록 처리 -->
	<insert id="insertEvent" parameterType="spring.mvc.benkfit.vo.EventVo">
		insert into event_tbl(eve_num, eve_title, eve_content, eve_start, eve_end, eve_img)
		values(event_seq.nextval, #{eve_title}, #{eve_content}, #{eve_start}, #{eve_end}, #{eve_img})
	</insert>
	
	<!-- 이벤트 수정 처리 -->
	<update id="updateEvent" parameterType="spring.mvc.benkfit.vo.EventVo">
		UPDATE event_tbl SET eve_title=#{eve_title}, eve_content=#{eve_content}, eve_start=#{eve_start}, eve_end=#{eve_end}, eve_img=#{eve_img} WHERE eve_num=#{eve_num}
	</update>
	
	<!-- 이벤트 삭제 처리 -->
	<delete id="deleteEvent" parameterType="spring.mvc.benkfit.vo.EventVo">
		DELETE event_tbl WHERE eve_num=#{eve_num}
	</delete>
	
	<!-- 연별 차트1 -->
	<select id="getYearFirstChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(mc.mycheq_regdate, 'YYYY') value, COUNT(mc.myCheq_account) myCheq_account
		FROM myCheqAccount_tbl mc
		GROUP BY TO_CHAR(mc.mycheq_regdate, 'YYYY')
		ORDER BY value
	</select>
	
	<!-- 연별 차트2 -->
	<select id="getYearSecondChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(ms.mysav_date, 'YYYY') value, COUNT(ms.mySav_account) mySav_account
		FROM mySavAccount_tbl ms
		GROUP BY TO_CHAR(ms.mysav_date, 'YYYY')
		ORDER BY value
	</select>
	
	<!-- 연별 차트3 -->
	<select id="getYearThirdChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(ml.myloan_date, 'YYYY') value, COUNT(ml.myLoan_account) myLoan_account
		FROM MyloanAccount_tbl ml
		GROUP BY TO_CHAR(ml.myloan_date, 'YYYY')
		ORDER BY value
	</select>
	
	<!-- 월별 차트1 -->
	<select id="getMonthFirstChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(mc.mycheq_regdate, 'MM') value, COUNT(mc.myCheq_account) myCheq_account
		FROM myCheqAccount_tbl mc
		GROUP BY TO_CHAR(mc.mycheq_regdate, 'MM')
		ORDER BY value
	</select>
	
	<!-- 월별 차트2 -->
	<select id="getMonthSecondChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(ms.mysav_date, 'MM') value, COUNT(ms.mySav_account) mySav_account
		FROM mySavAccount_tbl ms
		GROUP BY TO_CHAR(ms.mysav_date, 'MM')
		ORDER BY value
	</select>
	
	<!-- 월별 차트3 -->
	<select id="getMonthThirdChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(ml.myloan_date, 'MM') value, COUNT(ml.myLoan_account) myLoan_account
		FROM MyloanAccount_tbl ml
		GROUP BY TO_CHAR(ml.myloan_date, 'MM')
		ORDER BY value
	</select>
	
	<!-- 일별 차트1 -->
	<select id="getDayFirstChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(mc.mycheq_regdate, 'DD') value, COUNT(mc.myCheq_account) myCheq_account
		FROM myCheqAccount_tbl mc
		GROUP BY TO_CHAR(mc.mycheq_regdate, 'DD')
		ORDER BY value
	</select>
	
	<!-- 일별 차트2 -->
	<select id="getDaySecondChat" resultType="int">
		SELECT DISTINCT TO_CHAR(ms.mysav_date, 'DD') value, COUNT(ms.mySav_account) mySav_account
		FROM mySavAccount_tbl ms
		GROUP BY TO_CHAR(ms.mysav_date, 'DD')
		ORDER BY value
	</select>
	
	<!-- 일별 차트3 -->
	<select id="getDayThirdChat" resultType="spring.mvc.benkfit.vo.ChartVO">
		SELECT DISTINCT TO_CHAR(ml.myloan_date, 'DD') value, COUNT(ml.myLoan_account) myLoan_account
		FROM MyloanAccount_tbl ml
		GROUP BY TO_CHAR(ml.myloan_date, 'DD')
		ORDER BY value
	</select>
	
	<!-- 안드로이드 아이디 비밀번호 체크 -->
	<select id="confirmIdPwd" resultType="int">
		SELECT COUNT(*)
		FROM users_tbl
		WHERE c_id = #{c_id} AND c_pwd = #{c_pwd}
	</select>
	
	<!-- 안드로이드 로그인 -->
	<select id="getMemberInfo" resultType="spring.mvc.benkfit.vo.UsersVO">
		SELECT *
		FROM users_tbl
		where c_id = #{id}
	</select>
	
<!-- 	<select id="getMemberInfo2" resultType="spring.mvc.benkfit.vo.UsersVO">
		SELECT *
		FROM users_tbl
		where c_id = #{c_id}
	</select> -->
</mapper>